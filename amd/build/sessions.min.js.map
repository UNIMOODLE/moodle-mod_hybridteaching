{"version":3,"file":"sessions.min.js","sources":["../src/sessions.js"],"sourcesContent":["define([\n    'core/ajax',\n], function(ajax) {\n    const sessionexempt = (e) => {\n        sess = e.currentTarget;\n        sessid = sess.dataset.id\n        if (sess.checked) {\n            set_session_exempt(sessid, 1);\n        } else {\n            set_session_exempt(sessid, 0);\n        }\n    } \n\n    /**\n     * Sets manual attendance\n     * \n     * @param {integer} sessid\n     * @param {array} status\n     * @returns response with the modified slot information.\n     */\n    const set_session_exempt = (sessid, attexempt) => ajax.call([{\n        methodname: 'mod_hybridteaching_set_session_exempt',\n        args: {\n            sessid,\n            attexempt,\n        },\n    }])[0].done( response => {\n        return response;\n    }).fail( err => {\n        console.log(err);\n    });\n\n    return {\n        init: () => {\n            document.getElementById('id_perpage').onchange = function() {\n                var formPrefix = 'mform3';\n                var formElement = document.querySelector('[id^=\"' + formPrefix + '\"]');\n                if (formElement) {\n                    formElement.submit();\n                }\n            };\n            \n            const attsess = document.querySelectorAll('.attexempt');\n            attsess.forEach(sess => {\n                sess.addEventListener('change', sessionexempt, true); \n            });\n        }\n    }\n});"],"names":["define","ajax","sessionexempt","e","sess","currentTarget","sessid","dataset","id","checked","set_session_exempt","attexempt","call","methodname","args","done","response","fail","err","console","log","init","document","getElementById","onchange","formElement","querySelector","submit","querySelectorAll","forEach","addEventListener"],"mappings":"AAAAA,qCAAO,CACH,cACD,SAASC,YACFC,cAAiBC,IACnBC,KAAOD,EAAEE,cACTC,OAASF,KAAKG,QAAQC,GAClBJ,KAAKK,QACLC,mBAAmBJ,OAAQ,GAE3BI,mBAAmBJ,OAAQ,IAW7BI,mBAAqB,CAACJ,OAAQK,YAAcV,KAAKW,KAAK,CAAC,CACzDC,WAAY,wCACZC,KAAM,CACFR,OAAAA,OACAK,UAAAA,cAEJ,GAAGI,MAAMC,UACFA,WACRC,MAAMC,MACLC,QAAQC,IAAIF,cAGT,CACHG,KAAM,KACFC,SAASC,eAAe,cAAcC,SAAW,eAEzCC,YAAcH,SAASI,cAAc,kBACrCD,aACAA,YAAYE,UAIJL,SAASM,iBAAiB,cAClCC,SAAQzB,OACZA,KAAK0B,iBAAiB,SAAU5B,eAAe"}