define("mod_hybridteaching/attendance",["core/ajax"],(function(ajax){const manualattendance=async e=>{var att=e.currentTarget,attid=att.closest("tr").querySelector('[id^="attendance"]').value,id=document.getElementsByName("id")[0].value;att.checked?set_manual_attendance(attid,1,id):set_manual_attendance(attid,0,id)},set_manual_attendance=(attid,status,id)=>ajax.call([{methodname:"mod_hybridteaching_set_manual_attendance",args:{attid:attid,status:status,id:id}}])[0].done((response=>response)).fail((err=>{console.log(err)}));return{init:()=>{(()=>{let queryString=window.location.search,urlParams=new URLSearchParams(queryString);var hybridteachingid=urlParams.get("id"),sessionid=urlParams.get("sessionid");ajax.call([{methodname:"mod_hybridteaching_disable_attendance_inprogress",args:{hybridteachingid:hybridteachingid,sessionid:sessionid}}])[0].done((response=>{response=JSON.parse(response);var table=document.getElementById("hybridteachingattendance");if("sessionattendance"==urlParams.get("view")||null==urlParams.get("view")){let allchecks=document.getElementById("select-all-attendance");for(var i in response[0]){let check=document.getElementById("session-"+response[0][i].id);null!=check&&(allchecks.disabled="true",check.disabled="true")}}if("extendedsessionatt"==urlParams.get("view")){let allchecks=document.getElementById("select-all-attendance");for(var i in response[1]){let check=document.getElementById("attendance-"+response[1][i].id);if(null!=check)for(check.disabled="true",i=1;i<table.rows.length;i++){var rowatt=table.rows[i];if(rowatt.cells[0].firstChild.id===check.id){allchecks.disabled="true";let cellatt=rowatt.cells[8].firstChild;cellatt.disabled="true",console.log(cellatt)}}}}})).fail((err=>{console.log(err)}))})(),window.addEventListener("beforeunload",(e=>{e.stopImmediatePropagation()}),!0),null!==document.getElementById("id_perpage")&&(document.getElementById("id_perpage").onchange=function(){let formElement=document.querySelector('[id^="optionsform"]');formElement&&formElement.submit()}),null!==document.getElementById("id_attfilter")&&(document.getElementById("id_attfilter").onchange=function(){let formElement=document.querySelector('[id^="optionsform"]');formElement&&formElement.submit()}),null!==document.getElementById("id_groupid")&&(document.getElementById("id_groupid").onchange=function(){let formElement=document.querySelector('[id^="optionsform"]');formElement&&formElement.submit()}),null!==document.getElementById("id_selectedsession")&&(document.getElementById("id_selectedsession").onchange=function(){let formElement=document.querySelector('[id^="sessionsform"]');formElement&&formElement.submit()}),null!==document.getElementById("id_selecteduser")&&(document.getElementById("id_selecteduser").onchange=function(){let formElement=document.querySelector('[id^="sessionsform"]');formElement&&formElement.submit()}),document.querySelectorAll(".attendance-validated").forEach((att=>{att.addEventListener("change",manualattendance,!0)}))}}}));

//# sourceMappingURL=attendance.min.js.map