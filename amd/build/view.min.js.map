{"version":3,"file":"view.min.js","sources":["../src/view.js"],"sourcesContent":["define([\n    'core/ajax', 'core/toast', 'core/str'\n], function(ajax, toast, str) {\n\n    const hybridteaching_student_view_update = (sessionid, userid) => ajax.call([{\n        methodname: 'mod_hybridtaeching_get_display_actions',\n        args: {\n            sessionid,\n            userid,\n        }\n    }])[0].done(response => {\n        return JSON.parse(response);\n    }).fail(err => {\n        console.log(err);\n    });\n    const update_view = (sessionid, userid, test = 0) => {\n        hybridteaching_student_view_update(sessionid, userid).done( r => {\n            r = JSON.parse(r);\n            useform = false;\n            if (r.buttons == null || r.buttons == false ) {\n                clearInterval(test);\n            } else {\n                display = r.buttons;\n                if (!r.admin) {\n                    display == 'enter' ? toast.add(str.get_string('entersession', 'hybridteaching')) :\n                        toast.add(str.get_string('exitsession', 'hybridteaching'));\n                    var exitstr = str.get_string('exitsession', 'hybridteaching');\n                    exitstr.done(function(exitstring) {\n                        display == 'exit' ? document.querySelector('#zonemessage').querySelector('.alert-info').textContent =\n                         exitstring : '';\n                    })\n                }\n\n                forms = (document.getElementsByTagName('form'));\n                forms.forEach(form => {\n                    let formid = (form.getAttribute('id'));\n                    formid !== undefined && formid !== null ? useform = true : '';\n                    if (useform && (display == 'enter' || display == 'exit')) {\n                        switch (formid) {\n                            case 'joinvc':\n                                display == 'enter' ? form.setAttribute('style', 'display: block;') :\n                                form.setAttribute('style', 'display: none;');\n                                break;\n                            case 'showqr':\n                                display == 'enter' ? form.setAttribute('style', 'display: block;') :\n                                form.setAttribute('style', 'display: none;');\n                                break;\n                            case 'registeratt':\n                                display == 'enter' ? form.setAttribute('style', 'display: block;') :\n                                form.setAttribute('style', 'display: none;');\n                                break;\n                            case 'finishatt':\n                                display == 'enter' ? form.setAttribute('style', 'display: none;') :\n                                form.setAttribute('style', 'display: block;');\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                });\n            }\n            \n        });\n    }\n    return {\n        init: (sessionid, userid) => {\n            update_view(sessionid, userid);\n            hybridteaching_student_view_update(sessionid, userid);\n            var test = setInterval(() => {\n                update_view(sessionid, userid, test)}, 15000);\n        }\n    }\n});\n"],"names":["define","ajax","toast","str","hybridteaching_student_view_update","sessionid","userid","call","methodname","args","done","response","JSON","parse","fail","err","console","log","update_view","test","r","useform","buttons","clearInterval","display","admin","add","get_string","exitstring","document","querySelector","textContent","forms","getElementsByTagName","forEach","form","formid","getAttribute","setAttribute","init","setInterval"],"mappings":"AAAAA,iCAAO,CACH,YAAa,aAAc,aAC5B,SAASC,KAAMC,MAAOC,WAEfC,mCAAqC,CAACC,UAAWC,SAAWL,KAAKM,KAAK,CAAC,CACzEC,WAAY,yCACZC,KAAM,CACFJ,UAAAA,UACAC,OAAAA,WAEJ,GAAGI,MAAKC,UACDC,KAAKC,MAAMF,YACnBG,MAAKC,MACJC,QAAQC,IAAIF,QAEVG,YAAc,SAACb,UAAWC,YAAQa,4DAAO,EAC3Cf,mCAAmCC,UAAWC,QAAQI,MAAMU,OACxDA,EAAIR,KAAKC,MAAMO,GACfC,SAAU,EACO,MAAbD,EAAEE,SAAgC,GAAbF,EAAEE,QACvBC,cAAcJ,UACX,IACHK,QAAUJ,EAAEE,SACPF,EAAEK,MACQ,SAAXD,QAAqBtB,MAAMwB,IAAIvB,IAAIwB,WAAW,eAAgB,mBAC1DzB,MAAMwB,IAAIvB,IAAIwB,WAAW,cAAe,mBAC9BxB,IAAIwB,WAAW,cAAe,kBACpCjB,MAAK,SAASkB,YACP,QAAXJ,UAAoBK,SAASC,cAAc,gBAAgBA,cAAc,eAAeC,YACvFH,eAITI,MAASH,SAASI,qBAAqB,QACvCD,MAAME,SAAQC,WACNC,OAAUD,KAAKE,aAAa,SAChCD,MAAAA,SAA0Cf,SAAU,GAChDA,UAAuB,SAAXG,SAAiC,QAAXA,gBAC1BY,YACC,aAIA,aAIA,cACU,SAAXZ,QAAqBW,KAAKG,aAAa,QAAS,mBAChDH,KAAKG,aAAa,QAAS,4BAE1B,YACU,SAAXd,QAAqBW,KAAKG,aAAa,QAAS,kBAChDH,KAAKG,aAAa,QAAS,kCAWhD,CACHC,KAAM,CAAClC,UAAWC,UACdY,YAAYb,UAAWC,QACvBF,mCAAmCC,UAAWC,YAC1Ca,KAAOqB,aAAY,KACnBtB,YAAYb,UAAWC,OAAQa,QAAQ"}