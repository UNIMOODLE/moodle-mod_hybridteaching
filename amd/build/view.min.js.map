{"version":3,"file":"view.min.js","sources":["../src/view.js"],"sourcesContent":["define([\n    'core/ajax', 'core/toast', 'core/str'\n], function(ajax, toast, str) {\n\n    const hybridteaching_student_view_update = (sessionid, userid) => ajax.call([{\n        methodname: 'mod_hybridteaching_get_display_actions',\n        args: {\n            sessionid,\n            userid,\n        }\n    }])[0].done(response => {\n        return JSON.parse(response);\n    }).fail(err => {\n        // eslint-disable-next-line no-console\n        console.log(err);\n    });\n    const update_view = (sessionid, userid, timer = 0) => {\n        hybridteaching_student_view_update(sessionid, userid).done( r => {\n            r = JSON.parse(r);\n            if (r.buttons === null || r.buttons == false ) {\n                clearInterval(timer);\n            } else {\n                var display = r.buttons;\n                if (!r.admin) {\n                    if (display == 'enter') {\n                        clearInterval(timer);\n                        location.reload();\n                    }\n                };\n            }\n        });\n    };\n    return {\n        init: (sessionid, userid) => {\n            update_view(sessionid, userid);\n            hybridteaching_student_view_update(sessionid, userid);\n            toast.add(str.get_string('cantcreatevc', 'hybridteaching'));\n            var timer = setInterval(() => {\n                update_view(sessionid, userid, timer);}, 15000);\n        }\n    };\n});\n"],"names":["define","ajax","toast","str","hybridteaching_student_view_update","sessionid","userid","call","methodname","args","done","response","JSON","parse","fail","err","console","log","update_view","timer","r","buttons","clearInterval","display","admin","location","reload","init","add","get_string","setInterval"],"mappings":"AAAAA,iCAAO,CACH,YAAa,aAAc,aAC5B,SAASC,KAAMC,MAAOC,WAEfC,mCAAqC,CAACC,UAAWC,SAAWL,KAAKM,KAAK,CAAC,CACzEC,WAAY,yCACZC,KAAM,CACFJ,UAAAA,UACAC,OAAAA,WAEJ,GAAGI,MAAKC,UACDC,KAAKC,MAAMF,YACnBG,MAAKC,MAEJC,QAAQC,IAAIF,QAEVG,YAAc,SAACb,UAAWC,YAAQa,6DAAQ,EAC5Cf,mCAAmCC,UAAWC,QAAQI,MAAMU,OAEtC,QADlBA,EAAIR,KAAKC,MAAMO,IACTC,SAAiC,GAAbD,EAAEC,QACxBC,cAAcH,WACX,KACCI,QAAUH,EAAEC,QACXD,EAAEI,OACY,SAAXD,UACAD,cAAcH,OACdM,SAASC,qBAMtB,CACHC,KAAM,CAACtB,UAAWC,UACdY,YAAYb,UAAWC,QACvBF,mCAAmCC,UAAWC,QAC9CJ,MAAM0B,IAAIzB,IAAI0B,WAAW,eAAgB,uBACrCV,MAAQW,aAAY,KACpBZ,YAAYb,UAAWC,OAAQa,SAAU"}