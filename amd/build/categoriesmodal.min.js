/**
 *
 * @module   local_notificationsagent/assigntemplate
 * @copyright 2023, ISYC
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_hybridteaching/categoriesmodal",["core/str"],(function(str){return{init:function(){$("#categoriesmodal").on("shown.bs.modal",(function(){var cat=$("#categories").val();if(0!=cat.length){var categories=JSON.parse(cat);0!=categories.length&&categories.forEach((function(categoryId){$("#checkboxcategory-"+categoryId).prop("checked",!0)}))}})),$("#categoriesmodal .collapse").on("show.bs.collapse",(function(){$(this).parents(".listitem-category").removeClass("collapsed")})),$("#categoriesmodal .collapse").on("hide.bs.collapse",(function(){$(this).parents(".listitem-category").addClass("collapsed")})),$("#categoriesmodal #course-category-select-all").on("click",(function(){$("#categoriesmodal .category-listing .custom-control-input").prop("checked",$(this).prop("checked"))})),$("#categoriesmodal .category-listing").on("change","input[type=checkbox]",(function(){var checkssubcategoriescourses="#category-listing-content-"+$(this).attr("id").replace("checkboxcategory-","")+" .custom-control-input";$("#categoriesmodal .category-listing "+checkssubcategoriescourses).prop("checked",$(this).prop("checked"))})),$("#categoriesmodal #savecategoriesmodal").on("click",(function(){var data={category:[]},allCategories=[];$('#categoriesmodal #category-listing-content-0 > li[id^="listitem-category-"]').has('input[id^="checkboxcategory-"]:checked').each((function(){let items=$("#"+this.id+' input[id^="checkboxcategory-"]:checked').map((function(){let id=$(this).attr("id").replace("checkboxcategory-",""),parent=$(this).data("parent").replace("#category-listing-content-","");return-1===$.inArray(id,allCategories)&&allCategories.push(id),{id:id,parent:parent}})).get();$.grep(items,(function(item){data.category.push(item.id)}))})),$("#categories").val(data.category),$("#categoriesmodal").modal("hide")}))},loopatfirstparent:function(idparent){let arrayParents=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var module=this;if("#category-listing-content-0"!=idparent){arrayParents.push(idparent.replace("#category-listing-content-",""));var dataparent=$("#categoriesmodal .category-listing #listitem-category-"+idparent.replace("#category-listing-content-","")+" > .category-listing-header .custom-control-input").attr("data-parent");return module.loopatfirstparent(dataparent,arrayParents)}return arrayParents}}}));

//# sourceMappingURL=categoriesmodal.min.js.map